import{a as $,b as A,c as l,e as T,f as d,g as L,h as D,i as q,j as v,l as k,o as j,p as Q,q as B,s as U,t as z}from"./chunk-RQ7WODHY.js";import{E as u,K as o,L as i,M,N as E,P as g,U as x,V as N,W as V,X as a,Y as f,Z as I,da as F,ea as O,j as S,l as Z,m as b,n as P,oa as G,pa as _,q as p,r as c,ua as y,va as R,x as s,xa as w,y as C}from"./chunk-KGL6ORD4.js";var se=["messageModal"],le=()=>["/auth/register"],Y=class m{constructor(e,t){this.authService=e;this.router=t;this.year=new Date().getFullYear()}messageModal;year;formGroup=new q({username:new v("",[d.required,d.email]),password:new v("",[d.required,d.minLength(8)])});valid={username:{error:!1,msg:""},password:{error:!1,msg:""}};cleanAll(){l.Tools.cleanMessageError("username",this.valid),l.Tools.cleanMessageError("password",this.valid),this.formGroup.patchValue({username:"",password:""})}onInputChange(e){l.Tools.onInputChangeCleanError(e,this.valid)}onSubmit(){if(this.formGroup.status=="INVALID"){let e="username";this.formGroup.controls[e].status=="INVALID"&&(this.valid[e].error=!0,this.valid[e].msg="El correo electr\xF3nico es requerido y debe tener un formato valido [name@example.com]."),e="password",this.formGroup.controls[e].status=="INVALID"&&(this.valid[e].error=!0,this.valid[e].msg="Debe escribir su contrase\xF1a.")}else{let e=this.formGroup.value;this.authService.login(e.username,e.password)?this.router.navigate(["/"]):(this.cleanAll(),this.messageModal.show("Error de acceso","\xA1Por favor verifique que sus datos sean correctos y vuelva a intentarlo.!","Entendido"))}}static \u0275fac=function(t){return new(t||m)(C(A),C(y))};static \u0275cmp=b({type:m,selectors:[["app-login"]],viewQuery:function(t,r){if(t&1&&x(se,5),t&2){let n;N(n=V())&&(r.messageModal=n.first)}},standalone:!0,features:[F],decls:34,vars:8,consts:[["messageModal",""],[1,"d-flex","align-items-center","vh-100","overflow-auto"],[1,"container","m-auto","p-0"],[1,"row","w-100","m-0","py-4"],[1,"col-md-6","col-lg-7","m-auto","p-0"],[1,"slogan"],[1,"logo","d-block","mx-auto"],["alt","Logo","src","/logo.svg","width","100%"],[1,"phrase"],[1,"col-md-6","col-lg-5","m-0","p-0"],[1,"form-signin","mx-auto","w-100","border","rounded-3","shadow"],[1,"p-3","p-sm-4","border","rounded-3","bg-body-tertiary",3,"ngSubmit","formGroup"],[1,"form-floating","mb-3"],["formControlName","username","type","email","id","username","placeholder","name@example.com","required","",1,"form-control",3,"input","ngClass"],["for","email"],[1,"invalid-feedback"],["formControlName","password","type","password","id","password","placeholder","Password","required","",1,"form-control",3,"input","ngClass"],["for","password"],["type","submit",1,"w-100","btn","btn-lg","btn-primary"],[1,"w-100","pt-1"],[1,"fs-6","fw-light","text-decoration-none",3,"routerLink"],[1,"row","w-100","m-0","p-0","py-3"],[1,"copy","col","text-center"],["cid","messageModal"]],template:function(t,r){if(t&1){let n=E();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),M(6,"img",7),i(),o(7,"h1",8),a(8,"Tu mundo gamer, a un clic de distancia"),i()()(),o(9,"div",9)(10,"div",10)(11,"form",11),g("ngSubmit",function(){return p(n),c(r.onSubmit())}),o(12,"div",12)(13,"input",13),g("input",function(K){return p(n),c(r.onInputChange(K))}),i(),o(14,"label",14),a(15,"Correo electr\xF3nico"),i(),o(16,"div",15),a(17),i()(),o(18,"div",12)(19,"input",16),g("input",function(K){return p(n),c(r.onInputChange(K))}),i(),o(20,"label",17),a(21,"Contrase\xF1a"),i(),o(22,"div",15),a(23),i()(),o(24,"button",18),a(25,"Entrar"),i(),o(26,"div",19)(27,"a",20),a(28,"\xBFDesea registrarse?"),i()()()()()(),o(29,"div",21)(30,"div",22),a(31),i()()()(),M(32,"app-simple-modal-message",23,0)}t&2&&(s(11),u("formGroup",r.formGroup),s(2),u("ngClass",r.valid.username.error?"is-invalid":""),s(4),f(r.valid.username.msg),s(2),u("ngClass",r.valid.password.error?"is-invalid":""),s(4),f(r.valid.password.msg),s(4),u("routerLink",O(7,le)),s(4),I(" Todos los derechos reservados. \xA9 ",r.year," "))},dependencies:[_,G,w,R,U,k,T,L,D,B,j,Q,z],styles:[".slogan[_ngcontent-%COMP%]{min-width:220px;text-align:center;display:block}.slogan[_ngcontent-%COMP%]   .phrase[_ngcontent-%COMP%]{margin:0 .5rem}.form-signin[_ngcontent-%COMP%]{display:block;min-width:220px;max-width:330px;overflow:hidden}.copy[_ngcontent-%COMP%]{font-size:12px;min-width:220px}.slogan[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:40%}.slogan[_ngcontent-%COMP%]   .phrase[_ngcontent-%COMP%]{padding:1rem 0;margin:0 1rem}@media (min-width: 576px){.slogan[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:40%}}@media (min-width: 768px){.slogan[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:70%}.slogan[_ngcontent-%COMP%]   .phrase[_ngcontent-%COMP%]{padding:3rem 0;margin:0}}@media (min-width: 992px){.slogan[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:50%}}"]})};function ee(m,e){return t=>{let r=t.get(m),n=t.get(e);return!r||!n||n.errors&&!n.errors.mustMatch||(r.value!==n.value?n.setErrors({mustMatch:!0}):n.setErrors(null)),null}}var me=["messageModal"],de=()=>["/auth/login"],H=class m{constructor(e,t){this.authService=e;this.router=t;this.year=new Date().getFullYear()}messageModal;year;formGroup=new q({name:new v("",[d.required]),username:new v("",[d.required,d.email]),password:new v("",[d.required,d.minLength(8)]),confirmPassword:new v("",[d.required,d.minLength(8)])},{validators:[ee("password","confirmPassword")]});valid={name:{error:!1,msg:""},username:{error:!1,msg:""},password:{error:!1,msg:""},confirmPassword:{error:!1,msg:""}};cleanAll(){l.Tools.cleanMessageError("name",this.valid),l.Tools.cleanMessageError("username",this.valid),l.Tools.cleanMessageError("password",this.valid),l.Tools.cleanMessageError("confirmPassword",this.valid),this.formGroup.patchValue({name:"",username:"",password:"",confirmPassword:""})}onChangeName(){l.Tools.cleanMessageError("name",this.valid);let e=this.formGroup.get("name");if(e){let t=e.value;l.Tools.isString(t)&&this.formGroup.patchValue({name:l.Tools.removeExtraSpace(t)})}}onChageUsername(){l.Tools.cleanMessageError("username",this.valid);let e=this.formGroup.get("username");if(e){let t=e.value;l.Tools.isString(t)&&this.formGroup.patchValue({username:l.Tools.removeAllSpace(t)})}}onInputPassword(){l.Tools.cleanMessageError("password",this.valid),l.Tools.cleanMessageError("confirmPassword",this.valid)}onSubmit(){if(this.formGroup.status=="INVALID"){let e="name";this.formGroup.controls[e].status=="INVALID"&&(this.valid[e].error=!0,this.valid[e].msg="El nombre es requerido."),e="username",this.formGroup.controls[e].status=="INVALID"&&(this.valid[e].error=!0,this.valid[e].msg="El correo electr\xF3nico es requerido y debe tener un formato valido [name@example.com]."),e="password",this.formGroup.controls[e].status=="INVALID"&&(this.valid[e].error=!0,this.valid[e].msg="Debe escribir una contrase\xF1a de al menos ocho caracteres."),e="confirmPassword",this.formGroup.controls[e].status=="INVALID"&&(this.valid[e].error=!0,this.valid[e].msg="Sus contrase\xF1as no coinciden o son invalidas.")}else{let e=this.formGroup.value;this.authService.register(e.name,e.username,e.password),this.cleanAll(),this.messageModal.show("Nuevo registro","\xA1Ususario creado exitosamente!","Iniciar Sesi\xF3n",()=>this.router.navigate(["/","auth","login"]))}}static \u0275fac=function(t){return new(t||m)(C(A),C(y))};static \u0275cmp=b({type:m,selectors:[["app-register"]],viewQuery:function(t,r){if(t&1&&x(me,5),t&2){let n;N(n=V())&&(r.messageModal=n.first)}},standalone:!0,features:[F],decls:46,vars:12,consts:[["messageModal",""],[1,"d-flex","align-items-center","vh-100","overflow-auto"],[1,"container","m-auto","p-0"],[1,"row","w-100","m-0","py-4"],[1,"col-md-6","col-lg-7","m-auto","p-0"],[1,"slogan"],[1,"logo","d-block","mx-auto"],["alt","Logo","src","/logo.svg","width","100%"],[1,"phrase"],[1,"col-md-6","col-lg-5","m-0","p-0"],[1,"form-signin","mx-auto","w-100","border","rounded-3","shadow"],[1,"p-3","p-sm-4","border","rounded-3","bg-body-tertiary",3,"ngSubmit","formGroup"],[1,"form-floating","mb-3"],["formControlName","name","type","text","id","name","placeholder","Nomber","required","",1,"form-control",3,"change","ngClass"],["for","email"],[1,"invalid-feedback"],["formControlName","username","type","text","id","username","placeholder","name@example.com","required","",1,"form-control",3,"change","ngClass"],["formControlName","password","type","password","id","password","placeholder","Contrase\xF1a","required","",1,"form-control",3,"input","ngClass"],["for","password"],["formControlName","confirmPassword","type","password","id","confirmPassword","placeholder","Confirmar contrase\xF1a","required","",1,"form-control",3,"input","ngClass"],["for","confirmPassword"],["type","submit",1,"w-100","btn","btn-lg","btn-primary"],[1,"w-100","pt-1"],[1,"fs-6","fw-light","text-decoration-none",3,"routerLink"],[1,"row","w-100","m-0","p-0","py-3"],[1,"copy","col","text-center"],["cid","messageModal"]],template:function(t,r){if(t&1){let n=E();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),M(6,"img",7),i(),o(7,"h1",8),a(8,"Tu mundo gamer, a un clic de distancia"),i()()(),o(9,"div",9)(10,"div",10)(11,"form",11),g("ngSubmit",function(){return p(n),c(r.onSubmit())}),o(12,"div",12)(13,"input",13),g("change",function(){return p(n),c(r.onChangeName())}),i(),o(14,"label",14),a(15,"Nombre"),i(),o(16,"div",15),a(17),i()(),o(18,"div",12)(19,"input",16),g("change",function(){return p(n),c(r.onChageUsername())}),i(),o(20,"label",14),a(21,"Correo electr\xF3nico"),i(),o(22,"div",15),a(23),i()(),o(24,"div",12)(25,"input",17),g("input",function(){return p(n),c(r.onInputPassword())}),i(),o(26,"label",18),a(27,"Contrase\xF1a"),i(),o(28,"div",15),a(29),i()(),o(30,"div",12)(31,"input",19),g("input",function(){return p(n),c(r.onInputPassword())}),i(),o(32,"label",20),a(33,"Confirmar contrase\xF1a"),i(),o(34,"div",15),a(35),i()(),o(36,"button",21),a(37,"Crear cuenta"),i(),o(38,"div",22)(39,"a",23),a(40,"\xBFDesea iniciar sesi\xF3n?"),i()()()()()(),o(41,"div",24)(42,"div",25),a(43),i()()()(),M(44,"app-simple-modal-message",26,0)}t&2&&(s(11),u("formGroup",r.formGroup),s(2),u("ngClass",r.valid.name.error?"is-invalid":""),s(4),f(r.valid.name.msg),s(2),u("ngClass",r.valid.username.error?"is-invalid":""),s(4),f(r.valid.username.msg),s(2),u("ngClass",r.valid.password.error?"is-invalid":""),s(4),f(r.valid.password.msg),s(2),u("ngClass",r.valid.confirmPassword.error?"is-invalid":""),s(4),f(r.valid.confirmPassword.msg),s(4),u("routerLink",O(11,de)),s(4),I(" Todos los derechos reservados. \xA9 ",r.year," "))},dependencies:[_,G,w,R,U,k,T,L,D,B,j,Q,z],styles:[".slogan[_ngcontent-%COMP%]{min-width:220px;text-align:center;display:block}.slogan[_ngcontent-%COMP%]   .phrase[_ngcontent-%COMP%]{margin:0 .5rem}.form-signin[_ngcontent-%COMP%]{display:block;min-width:220px;max-width:330px;overflow:hidden}.copy[_ngcontent-%COMP%]{font-size:12px;min-width:220px}.slogan[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:40%}.slogan[_ngcontent-%COMP%]   .phrase[_ngcontent-%COMP%]{padding:1rem 0;margin:0 1rem}@media (min-width: 576px){.slogan[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:40%}}@media (min-width: 768px){.slogan[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:70%}.slogan[_ngcontent-%COMP%]   .phrase[_ngcontent-%COMP%]{padding:3rem 0;margin:0}}@media (min-width: 992px){.slogan[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:50%}}"]})};var X=(m,e)=>{let t=Z(y);return $.Session.isLoggedIn()?t.createUrlTree(["/"]):!0};var ue=[{path:"",children:[{path:"register",component:H,canActivate:[X]},{path:"login",component:Y,canActivate:[X]}]}],J=class m{static \u0275fac=function(t){return new(t||m)};static \u0275mod=P({type:m});static \u0275inj=S({imports:[w.forChild(ue),w]})};var te=class m{static \u0275fac=function(t){return new(t||m)};static \u0275mod=P({type:m});static \u0275inj=S({imports:[_,J]})};export{te as AuthModule};
